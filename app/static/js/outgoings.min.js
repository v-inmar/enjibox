$((()=>{utilityMakeHeightTheSame(".outgoing-reads-item-list-a"),outgoingClearTime(),outgoingOpenNewOptionModal(),outgoingClearNewOptionModalOnHide(),outgoingSaveNewOption(),outgoingSaveItem("post","#outgoingNewItemForm",outgoingSaveNewItemSuccessCallback,outgoingSaveNewItemErrorCallback),outgoingSaveItem("put","#outgoingUpdateItemForm",outgoingSaveUpdateSuccessCallback,outgoingSaveUpdateErrorCallback),outgoingDeleteItemOpenModal(),outgoingDeleteItem(),outgoingFilterSubmit(),outgoingPopulatePresetAnchors()}));const outgoingPopulatePresetAnchors=()=>{var t=$(".outgoing-read-preset-a").attr("href");const e=utilityGetDateToday();$(".outgoing-read-preset-a-today").attr("href",t+"?label=&date_from="+e+"&date_to="+e+"&category=&form=&page=1");const o=utilityGetThisWeekStartDate(),a=utilityGetThisWeekEndDate();$(".outgoing-read-preset-a-this-week").attr("href",t+"?label=&date_from="+o+"&date_to="+a+"&category=&form=&page=1");const n=utilityGetThisMonthStartDate(),i=utilityGetThisMonthEndDate();$(".outgoing-read-preset-a-this-month").attr("href",t+"?label=&date_from="+n+"&date_to="+i+"&category=&form=&page=1");const l=utilityGetThisYearStartDate(),g=utilityGetThisYearEndDate();$(".outgoing-read-preset-a-this-year").attr("href",t+"?label=&date_from="+l+"&date_to="+g+"&category=&form=&page=1")},outgoingFilterSubmit=()=>{$("#outgoingFilterFormElement").on("submit",(function(t){t.preventDefault(),$("#outgoingSubmitBtnFilter").prop("disabled",!0);var e=$(this).data("urlprefix");const o=$("#outgoingLabelFilter").val(),a=$("#outgoingCategoryFilter").val(),n=$("#outgoingFormFilter").val(),i=$("#outgoingDateToFilter").val();e+="?",e+="label="+o,e+="&date_from="+$("#outgoingDateFromFilter").val(),e+="&date_to="+i,e+="&category="+a,e+="&form="+n,e+="&page=1",window.location.href=e}))},outgoingDeleteItemOpenModal=()=>{$("#outgoingItemDeleteLink").on("click",(function(t){t.preventDefault(),$("#outgoingDeleteModalBodyP").text($("#outgoingLabelItem").text()),$("#outgoingDeleteModalBtn").data("url",$(this).data("url")),$("#outgoingDeleteModalBtn").data("csrf",$(this).data("csrf")),new bootstrap.Modal(document.getElementById("outgoingDeleteModal"),{backdrop:"static"}).show()}))},outgoingDeleteItem=()=>{$("#outgoingDeleteModalBtn").on("click",(function(t){let e=$(this).data("url"),o=$(this).data("csrf");$(this).html('\n        Deleting...\n        <div class="spinner-border spinner-border-sm" role="status">\n            <span class="visually-hidden">Saving...</span>\n        </div>\n        '),$(".outgoing-delete-modal-btns").each((function(){$(this).prop("disabled","true")})),utilityAjaxDelete(token=o,e,contentType="application/json",successCallback=outgoingDeleteSuccessCallback,errorCallback=outgoingDeleteErrorCallback)}))},outgoingDeleteSuccessCallback=t=>{window.location.replace(t.payload.url)},outgoingDeleteErrorCallback=(t,e,o)=>{$("#outgoingDeleteModalBodyH5").text(t.status+": "+t.responseJSON.msg),$("#outgoingDeleteModalBtn").html("Yes, Delete It"),$(".outgoing-delete-modal-btns").each((function(){$(this).prop("disabled",!1)}))},outgoingDisableAllFormElements=t=>{$(t).find("*").attr("disabled",!0)},outgoingEnableAllFormElements=t=>{$(t).find("*").attr("disabled",!1)},outgoingSaveItem=(t,e,o,a)=>{$(e).on("submit",(function(n){n.preventDefault();let i=$("#outgoingLabelInput").val(),l=$("#outgoingAmountInput").val(),g=$("#outgoingCategorySelect").val(),u=$("#outgoingFormSelect").val(),r=$("#outgoingDateInput").val(),s=$("#outgoingTimeInput").val(),d=$("#outgoingCommentTextarea").val();var p=!1;$("#outgoingOffsetCheckbox").is(":checked")&&(p=!0),data={label:i,amount:l,date:r,category:g,form:u,time:s,comment:d,offset:p},$("#outgoingSaveBtn").html('\n        Saving...\n        <div class="spinner-border spinner-border-sm" role="status">\n            <span class="visually-hidden">Saving...</span>\n        </div>\n        '),outgoingDisableAllFormElements(e),"post"===t?utilityAjaxPost(token=$("#outgoingCSRFTokenInput").val(),url=$(this).attr("action"),contentType="application/json",dataJson=JSON.stringify(data),o,a):utilityAjaxPut(token=$("#outgoingCSRFTokenInput").val(),url=$(this).attr("action"),contentType="application/json",dataJson=JSON.stringify(data),o,a)}))},outgoingSaveUpdateSuccessCallback=t=>{window.location.replace(t.payload.url)},outgoingSaveUpdateErrorCallback=(t,e,o)=>{$("#outgoingSaveBtn").html("Save"),outgoingEnableAllFormElements("#outgoingUpdateItemForm"),$("#progressReportModalBody").append(`\n        <p class="text-danger">${t.status}: ${o} ${t.responseJSON.msg}</p>\n    `),utilityOpenProgressReportModal()},outgoingSaveNewItemSuccessCallback=t=>{$("#progressReportModalBody").append('\n        <p class="text-light">Saved!</p>\n    '),utilityOpenProgressReportModal(),$("#outgoingSaveBtn").html("Save"),outgoingEnableAllFormElements("#outgoingNewItemForm"),$(".list-group-item").each((function(){$(this).removeClass("active")})),$("#outgoingNewItemAddedListDiv").prepend(outgoingNewItemTemplate(t.payload)),$("#"+t.payload.pid).fadeOut(300).fadeIn(300).fadeOut(300).fadeIn(300).fadeOut(300).fadeIn(300).fadeOut(300).fadeIn(300);var e=parseInt($(".outgoing-new-item-added-count").text());$(".outgoing-new-item-added-count").text(e+1),outgoingSaveNewItemResetElements()},outgoingSaveNewItemErrorCallback=(t,e,o)=>{$("#outgoingSaveBtn").html("Save"),outgoingEnableAllFormElements("#outgoingNewItemForm"),$("#progressReportModalBody").append(`\n        <p class="text-danger">${t.status}: ${o} ${t.responseJSON.msg}</p>\n    `),utilityOpenProgressReportModal()},outgoingSaveNewItemResetElements=()=>{$("#outgoingLabelInput").val(""),$("#outgoingAmountInput").val(""),$("#outgoingCategorySelect").val(""),$("#outgoingFormSelect").val(""),$("#outgoingDateInput").val(""),$("#outgoingTimeInput").val(""),$("#outgoingCommentTextarea").val(""),$("#outgoingOffsetCheckbox").prop("checked",!1)},outgoingClearTime=()=>{$(".outgoing-clear-time").on("click",(function(t){t.preventDefault(),$("#outgoingTimeInput").val("")}))},outgoingClearNewOptionModalOnHide=()=>{document.getElementById("outgoingNewOptionModal").addEventListener("hidden.bs.modal",(t=>{$("#outgoingNewOptionModalError").text(""),$("#outgoingNewOptionModalHeader").text(""),$("#outgoingNewOptionModalLabel").text(""),$("#outgoingNewOptionModalInput").attr("maxlength",""),$("#outgoingNewOptionModalInput").val(""),$("#outgoingNewOptionModalSubmitBtn").data("topic","")}))},outgoingOpenNewOptionModal=()=>{$(".outgoing-new-option").on("click",(function(t){t.preventDefault(),$("#outgoingNewOptionModalHeader").text($(this).data("title")),$("#outgoingNewOptionModalLabel").text($(this).data("label")),$("#outgoingNewOptionModalInput").attr("maxlength",$(this).data("maxlength")),$("#outgoingNewOptionModalSubmitBtn").data("topic",$(this).data("label")),new bootstrap.Modal(document.getElementById("outgoingNewOptionModal")).show()}))},outgoingSaveNewOption=()=>{$("#outgoingNewOptionModalFormElement").on("submit",(function(t){t.preventDefault(),$("#outgoingNewOptionModalError").text("");let e=$("#outgoingNewOptionModalSubmitBtn").data("topic");var o=[],a="",n="";"Category"==e?(a="outgoing-category-option",n="outgoingCategorySelect"):(a="outgoing-form-option",n="outgoingFormSelect"),$("."+a).each((function(){let t=$(this).val();o.includes(t)||o.push(t)}));let i=$("#outgoingNewOptionModalInput").val();if(o.includes(i))$("#outgoingNewOptionModalError").text("Already in the list");else{$("#"+n).append(`\n                <option value="${i}" class="${a}" selected>${i}</option>\n            `);var l=document.getElementById("outgoingNewOptionModal");bootstrap.Modal.getInstance(l).hide(),$("#"+n).fadeOut(300).fadeIn(300).fadeOut(300).fadeIn(300).fadeOut(300).fadeIn(300)}}))},outgoingNewItemTemplate=t=>`\n    <a id="${t.pid}" href="${t.url}" class="list-group-item list-group-item-action active" aria-current="true">\n        <div class="d-flex w-100 justify-content-between">\n            ${null!=t.time?`<h5 class="mb-1">${t.date} ${t.time}</h5>`:`<h5>${t.date}</h5>`}\n            ${t.offset?`<small><span class="badge text-bg-warning" data-bs-toggle="tooltip" data-bs-placement="bottom" data-bs-title="Offset">${t.currency}${t.amount}</span></small>`:`<small>${t.currency}${t.amount}</small>`}\n        </div>\n        <div class="row">\n            <div class="col text-truncate">${t.label}</div>\n        </div>\n        <small><span class="badge text-bg-secondary me-1">${t.category}</span><span class="badge text-bg-info">${t.form}</span></small>\n    </a>\n    `;